
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

<h:head><title>Car History</title></h:head>

<h:body > 



    <div align="center">
    <h:outputText  value="Car Parking System"  style="font-weight:bold;font-family:Arial;
	color:rgb(0, 0, 0); font-size:35px;" ></h:outputText>
	</div><br></br>
	
	<p:button href="addParkingSlot.xhtml" value="Add Building" style="margin:2px;width:100px;height:50px; background:#f4f6f6  ;color:#000000;" />
				<p:button href="view.xhtml" value="Car view" style="margin:2px;width:100px;height:50px; background:#f2f4f4  ;color:#000000;" />
				<p:button href="carHistory.xhtml" value="Car History" style="margin:2px;width:100px;height:50px; background: #ebedef  ;color:#000000;" />
				<p:button href="systemAdminProfile.xhtml" style="margin:2px;width:100px;height:50px; background: #f8f9f9  ;color:#000000;" value="Admin Profile"/>
		



<h:form id="form1">


    <p:dataTable  var="h" value="#{carParkingHistoryBean.historylist}" widgetVar="history_record"
                 emptyMessage="No cars found with given criteria" filteredValue="#{carParkingHistoryBean.filteredRecords}">

        <p:column filterBy="#{h.building}" headerText="Building" filterMatchMode="contains">
            <h:outputText value="#{h.building}" />
        </p:column>
        <p:column filterBy="#{h.floor}" headerText="Floor" filterMatchMode="contains">
            <h:outputText value="#{h.floor}" />
        </p:column>
        <p:column filterBy="#{h.slot}" headerText="Slot" filterMatchMode="contains">
            <h:outputText value="#{h.slot}" />
        </p:column>
        <p:column filterBy="#{h.carNumber}" headerText="Car Number" filterMatchMode="contains">
            <h:outputText value="#{h.carNumber}" />
        </p:column>
        <p:column filterBy="#{h.entryTime}" headerText="Entry Time" filterMatchMode="contains">
        
            <h:outputText value="#{h.entryTime}">
              <f:convertDateTime pattern="HH:mm:ss" />
            
            </h:outputText>
        </p:column>
        <p:column filterBy="#{h.exitTime}" headerText="Exit Time" filterMatchMode="contains">
        
            <h:outputText value="#{h.exitTime}">
              <f:convertDateTime pattern="HH:mm:ss" />
            </h:outputText>
        </p:column>
        <p:column filterBy="#{h.date}" headerText="Date" filterMatchMode="contains">
        
            <h:outputText value="#{h.date}">
                                 <f:convertDateTime pattern="yyyy/MM/dd" />
            
            </h:outputText>
        </p:column>
         <p:column filterBy="#{h.submittedUser}" headerText="Submitted User" filterMatchMode="contains">
            <h:outputText value="#{h.submittedUser}" />
        </p:column>
        
          <p:column headerText="Actions"> 
        <p:commandButton value="Delete" action="#{carParkingHistoryBean.deleteCarHistory(h.id)}" update="form1" styleClass="ui-priority-primary">
       		 <p:confirm header="Confirmation" message="Are you sure?" icon="pi pi-exclamation-triangle" />
    		</p:commandButton>
     <h:form>
   			 <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
  			 <p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="pi pi-check" />
     		 <p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="pi pi-times" />
   			 </p:confirmDialog>      
			</h:form>
        
          </p:column> 
         
    </p:dataTable>
  
    </h:form>
 </h:body>
</html>